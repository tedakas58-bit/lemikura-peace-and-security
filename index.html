<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#38a169">
    <meta name="format-detection" content="telephone=no">
    <meta name="touch-action" content="manipulation">
    <title>Lemi Kura Sub-City Peace and Security Administration Office</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Ethiopic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/modern-style.css">
    <link rel="stylesheet" href="css/news-system.css">
</head>

<body>
    <!-- Modern Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <img class="lg" src='images/hero-bg.png' alt="Logo">
                <span data-translate="siteTitle">Lemi Kura Sub-City Peace and Security Administration Office</span>
            </div>
            <div class="header-controls">
                <div class="language-selector">
                    <button id="languageToggle" class="language-btn" onclick="toggleLanguage()">
                        <i class="fas fa-globe"></i>
                        <span id="currentLang">·ä†·àõ</span>
                    </button>
                </div>
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <nav>
                <ul id="mainMenu">
                    <li><a href="#home" data-translate="navHome">Home</a></li>
                    <li><a href="#about" data-translate="navAbout">About Us</a></li>
                    <li><a href="#services" data-translate="navServices">Our Services</a></li>
                    <li><a href="#news" data-translate="navNews">News & Blogs</a></li>
                    <li><a href="#comments" data-translate="navComments">Give Feedback</a></li>
                    <li><a href="#contact" data-translate="navContact">Contact Us</a></li>
                    <li><a href="feedback.html" class="cta-button" data-translate="navFeedback">Service Evaluation</a></li>
                    <li><a href="admin.html" class="admin-link" data-translate="navAdmin">Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Modern Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1 data-translate="heroTitle">Lemi Kura Sub-City Peace and Security Administration Office - Committed to Excellence in Peace</h1>
                <p data-translate="heroDescription">We are dedicated to making Addis Ababa a city where peace, security, and the rule of law prevail.</p>
                <div class="hero-buttons">
                    <a href="#services" class="btn btn-primary" data-translate="heroBtnServices">View Services</a>
                    <a href="#contact" class="btn btn-secondary" data-translate="heroBtnContact">Contact Us</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Modern Welcome Section -->
    <section class="welcome fade-in">
        <div class="container">
            <div class="welcome-content">
                <p data-translate="welcomeText">Peace and security are fundamental elements that support the stability and development of society. These concepts are often interconnected, where peace refers to the absence of conflict and the presence of harmonious relationships, while security involves protecting individuals, communities, and nations from internal and external threats.</p>
            </div>
        </div>
    </section>

    <!-- Modern About Section -->
    <section class="about fade-in" id="about">
        <div class="container">
            <div class="section-title">
                <h2 data-translate="aboutTitle">About Us</h2>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <p data-translate="aboutText">The Lemi Kura Peace and Security Office was established with a firm commitment to creating a safe, stable, and harmonious community. Our dedicated team, guided by principles of integrity, accountability, and cooperation, works tirelessly to prevent conflicts, enforce the rule of law, and protect the safety of all residents.</p>
                    <div class="about-info">
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <h4 data-translate="aboutAddress">Address</h4>
                            <p data-translate="aboutAddressText">500 meters from Derartu Square</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-city"></i>
                            <h4 data-translate="aboutCity">City</h4>
                            <p data-translate="aboutCityText">Addis Ababa</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-bullseye"></i>
                            <h4 data-translate="aboutMission">Mission</h4>
                            <p data-translate="aboutMissionText">To ensure the rule of law, peace, and security in our district by implementing laws that promote good governance and development in Addis Ababa, creating legal awareness among our residents, providing accessible and efficient justice services, preventing crime, and fostering community understanding of district administration.</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-lightbulb"></i>
                            <h4 data-translate="aboutVision">·à´·ãï·ã≠</h4>
                            <p data-translate="aboutVisionText">·â†2025·ä†·ã≤·àµ ·ä†·â†·â£ ·à∞·àã·àù·äì ·çÄ·å•·â≥·äì ·à∞·àã·àù ·ã®·à∞·çà·äê·â†·âµ ·ä•·äì ·ã®·àÖ·åç ·ã®·â†·àã·ã≠·äê·âµ ·ã®·â∞·à®·åã·åà·å†·â†·âµ ·ä®·â∞·àõ ·àà·àõ·ãµ·à®·åç·å•·à®·âµ ·ä•·äï·ã∞ ·ãà·à®·ã≥ ·ã®·à´·à£·âΩ·äï·äï ·àö·äì ·àò·å´·ãà·âµ·ç°·ç°</p>
                        </div>
                    </div>
                </div>
                            <i class="fas fa-phone"></i>
                            <h4>Phone</h4>
                            <p>+251-11-XXX-XXXX</p>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <img src="images/pro.jpg" alt="Office Interior">
                </div>
            </div>
        </div>
    </section>

    <!-- Modern Services Section -->
    <section class="services fade-in" id="services">
        <div class="container">
            <div class="section-title">
                <h2 data-translate="servicesTitle">Our Services</h2>
                <p data-translate="servicesSubtitle">Peace and security services for community safety</p>
            </div>
            <div class="services-grid">
                <div class="service-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3 data-translate="service1Title">Community Security Support and Monitoring</h3>
                    <p data-translate="service1Desc">We provide support and monitoring to ensure community security organizations in all 10 districts are operational and effective.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-users-cog"></i>
                    <h3 data-translate="service2Title">Peace Corps Deployment</h3>
                    <p data-translate="service2Desc">We establish and monitor operational systems where the community protects itself and its surroundings to prevent criminal activities and illegal actions in the district.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-hands-helping"></i>
                    <h3 data-translate="service3Title">Community Ownership of Security</h3>
                    <p data-translate="service3Desc">We work with district security agencies to implement activities that make the community owners of their security, coordinating with relevant bodies to ensure effective outcomes.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-network-wired"></i>
                    <h3 data-translate="service4Title">Organizational Support and Monitoring</h3>
                    <p data-translate="service4Desc">Providing support and monitoring to organizations within the 10 districts to ensure effective operations.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-balance-scale"></i>
                    <h3 data-translate="service5Title">Conflict Resolution</h3>
                    <p data-translate="service5Desc">We provide organized and coordinated responses to necessary conflicts, disturbances, and complaints related to security and trust issues in the districts.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-search-location"></i>
                    <h3 data-translate="service6Title">Risk Area Identification</h3>
                    <p data-translate="service6Desc">Working with districts to identify areas at risk of crime and providing information to relevant authorities.</p>
                </div>
            </div>
            <div class="service-cta">
                <a href="#contact" class="btn btn-primary" data-translate="servicesCta">Contact Our Experts for Assistance</a>
            </div>
        </div>
    </section>

    <!-- Modern News Section -->
    <section class="news fade-in" id="news">
        <div class="container">
            <div class="section-title">
                <h2 data-translate="newsTitle">News & Blogs</h2>
                <p data-translate="newsSubtitle">Latest news, announcements, and peace & security updates</p>
            </div>
            <div class="news-grid" id="newsContainer">
                <!-- News items will be loaded here dynamically -->
            </div>
        </div>
    </section>

    <!-- Enhanced News Reader Modal -->
    <div id="newsModal" class="news-reader-modal">
        <div class="news-reader-overlay" onclick="closeNewsModal()"></div>
        <div class="news-reader-container">
            <!-- Reader Header -->
            <div class="news-reader-header">
                <button class="reader-back-btn" onclick="closeNewsModal()" aria-label="Close reader">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back</span>
                </button>
                <div class="reader-actions">
                    <button class="reader-action-btn" onclick="shareNews()" aria-label="Share article">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <button class="reader-action-btn" onclick="toggleBookmark()" aria-label="Bookmark article">
                        <i class="far fa-bookmark"></i>
                    </button>
                    <button class="reader-action-btn" onclick="adjustTextSize()" aria-label="Text size">
                        <i class="fas fa-text-height"></i>
                    </button>
                </div>
            </div>

            <!-- Reader Content -->
            <div class="news-reader-content">
                <div class="reader-progress-bar">
                    <div class="progress-fill"></div>
                </div>
                
                <article class="news-article" id="newsArticle">
                    <div id="modalContent">
                        <!-- Article content will be loaded here -->
                    </div>
                </article>

                <!-- Article Footer -->
                <div class="article-footer">
                    <div class="article-engagement">
                        <button class="engagement-btn like-article-btn" onclick="likeCurrentArticle()">
                            <i class="far fa-heart"></i>
                            <span class="engagement-count">0</span>
                            <span class="engagement-label">·ãà·ã≥·åÖ·äê·âµ</span>
                        </button>
                        <button class="engagement-btn comment-toggle-btn" onclick="toggleComments()">
                            <i class="far fa-comment"></i>
                            <span class="engagement-count">0</span>
                            <span class="engagement-label">·ä†·àµ·â∞·ã´·ã®·âµ</span>
                        </button>
                        <button class="engagement-btn share-btn" onclick="shareNews()">
                            <i class="fas fa-share"></i>
                            <span class="engagement-label">·ä†·åã·à´</span>
                        </button>
                    </div>
                </div>

                <!-- Enhanced Comments Section -->
                <div class="comments-section" id="commentsSection">
                    <div class="comments-header">
                        <h3>·ä†·àµ·â∞·ã´·ã®·â∂·âΩ</h3>
                        <button class="comments-close-btn" onclick="toggleComments()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="comments-container" id="commentsContainer">
                        <!-- Comments will be loaded here -->
                    </div>
                    
                    <div class="comment-form-container">
                        <div class="comment-form">
                            <textarea id="newsCommentText" placeholder="·ä†·àµ·â∞·ã´·ã®·âµ·ãé·äï ·ã≠·åª·çâ..." rows="3"></textarea>
                            <div class="comment-form-actions">
                                <button class="btn btn-secondary" onclick="clearComment()">·à∞·à≠·ãù</button>
                                <button class="btn btn-primary" onclick="addNewsComment()">
                                    <i class="fas fa-paper-plane"></i>
                                    ·ä†·àµ·â∞·ã´·ã®·âµ ·àã·ä≠
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modern Contact Section -->
    <section class="contact fade-in" id="contact">
        <div class="container">
            <div class="section-title">
                <h2 data-translate="contactTitle">We're Ready to Receive Your Feedback or Questions</h2>
                <p data-translate="contactSubtitle">If you have questions or concerns, please contact us.</p>
            </div>
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <h4 data-translate="contactAddress">Address</h4>
                            <p>500 meters from Derartu Square, Addis Ababa, Ethiopia</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <h4 data-translate="contactPhone">Phone</h4>
                            <p>+251 923-72-0475</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h4 data-translate="contactEmail">Email</h4>
                            <p>info@lemikurapeace.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <h4 data-translate="contactHours">Working Hours</h4>
                            <p data-translate="contactHoursText">Monday - Saturday: 8:00 AM - 8:00 PM<br>Sunday: Closed</p>
                        </div>
                    </div>
                    <div class="map-container">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3940.4937094165847!2d38.74516737584896!3d9.018847091003896!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x164b85cef5ab402b%3A0x8467b6b037a24d49!2sAddis%20Ababa%2C%20Ethiopia!5e0!3m2!1sen!2set!4v1734634800000!5m2!1sen!2set" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modern Comment Submission Section -->
    <section class="comment-submission fade-in" id="comments">
        <div class="container">
            <div class="section-title">
                <h2 data-translate="commentsTitle">Share Your Comments</h2>
                <p data-translate="commentsDescription">Your feedback is valuable to us. Please share your thoughts, questions, or comments.</p>
            </div>
            <div class="comment-form-container">
                <form id="publicCommentForm" class="comment-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="commentAuthor"><i class="fas fa-user"></i> <span data-translate="commentAuthor">Your Name</span></label>
                            <input type="text" id="commentAuthor" name="author" required>
                        </div>
                        <div class="form-group">
                            <label for="commentEmail"><i class="fas fa-envelope"></i> <span data-translate="commentEmail">Email (Optional)</span></label>
                            <input type="email" id="commentEmail" name="email">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="commentSubject"><i class="fas fa-tag"></i> <span data-translate="commentSubject">Subject</span></label>
                        <select id="commentSubject" name="subject" required>
                            <option value="" data-translate="selectSubject">Select Subject</option>
                            <option value="General Feedback" data-translate="generalFeedback">General Feedback</option>
                            <option value="Service Request" data-translate="serviceRequest">Service Request</option>
                            <option value="Complaint" data-translate="complaint">Complaint</option>
                            <option value="Appreciation" data-translate="appreciation">Appreciation</option>
                            <option value="Suggestion" data-translate="suggestion">Suggestion</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="commentText"><i class="fas fa-comment"></i> <span data-translate="commentText">Your Comment</span></label>
                        <textarea id="commentText" name="text" rows="5" required data-translate="commentPlaceholder" placeholder="Please write your comment here..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> <span data-translate="submitComment">Submit Comment</span>
                        </button>
                        <button type="reset" class="btn btn-secondary">
                            <i class="fas fa-undo"></i> <span data-translate="resetForm">Reset Form</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Modern Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 data-translate="siteTitle">Lemi Kura Sub-City Peace and Security Administration</h3>
                    <p data-translate="heroDescription">We are dedicated to making Addis Ababa a city where peace, security, and the rule of law prevail.</p>
                    <div class="social-icons">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3 data-translate="footerQuickLinks">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home" data-translate="navHome"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#about" data-translate="navAbout"><i class="fas fa-info-circle"></i> About Us</a></li>
                        <li><a href="#services" data-translate="navServices"><i class="fas fa-cogs"></i> Services</a></li>
                        <li><a href="#news" data-translate="navNews"><i class="fas fa-newspaper"></i> News & Blogs</a></li>
                        <li><a href="#comments" data-translate="navComments"><i class="fas fa-comment"></i> Give Feedback</a></li>
                        <li><a href="#contact" data-translate="navContact"><i class="fas fa-envelope"></i> Contact Us</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 data-translate="footerServices">Our Services</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-translate="service2Title"><i class="fas fa-shield-alt"></i> Peace Corps Deployment</a></li>
                        <li><a href="#" data-translate="service3Title"><i class="fas fa-users"></i> Community Security Ownership</a></li>
                        <li><a href="#" data-translate="service4Title"><i class="fas fa-network-wired"></i> Organizational Support</a></li>
                        <li><a href="#" data-translate="service5Title"><i class="fas fa-balance-scale"></i> Conflict Resolution</a></li>
                        <li><a href="#" data-translate="service6Title"><i class="fas fa-search-location"></i> Risk Area Identification</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 data-translate="footerContact">Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> Lemi Kura, Addis Ababa</li>
                        <li><i class="fas fa-phone"></i> +251923720475</li>
                        <li><i class="fas fa-envelope"></i> info@lemikurapeace.com</li>
                        <li><i class="fas fa-clock"></i> Monday - Saturday: 8:00 AM - 8:00 PM</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 <span data-translate="footerRights">Lemi Kura Peace and Security Administration. All rights reserved.</span></p>
                <ul class="footer-links-inline">
                    <li><a href="#" data-translate="footerPrivacy">Privacy Policy</a></li>
                    <li><a href="#" data-translate="footerTerms">Terms of Use</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- Supabase CDN with robust fallback -->
    <script>
        // Robust Supabase loading with multiple CDNs and proper waiting
        (function() {
            let supabaseLoaded = false;
            let loadAttempts = 0;
            const maxAttempts = 3;
            
            const cdnUrls = [
                'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.js',
                'https://unpkg.com/@supabase/supabase-js@2.39.3/dist/umd/supabase.js',
                'https://cdn.skypack.dev/@supabase/supabase-js@2.39.3'
            ];
            
            function loadSupabaseScript(url, callback) {
                const script = document.createElement('script');
                script.src = url;
                script.timeout = 10000; // 10 second timeout
                
                const timeoutId = setTimeout(() => {
                    console.log('‚è∞ Timeout loading from:', url);
                    callback(false);
                }, 10000);
                
                script.onload = function() {
                    clearTimeout(timeoutId);
                    if (typeof window.supabase !== 'undefined') {
                        console.log('‚úÖ Supabase loaded from:', url);
                        supabaseLoaded = true;
                        callback(true);
                    } else {
                        console.log('‚ö†Ô∏è Script loaded but Supabase not available from:', url);
                        callback(false);
                    }
                };
                
                script.onerror = function() {
                    clearTimeout(timeoutId);
                    console.log('‚ùå Failed to load from:', url);
                    callback(false);
                };
                
                document.head.appendChild(script);
            }
            
            function tryNextCDN() {
                if (supabaseLoaded || loadAttempts >= maxAttempts) {
                    if (!supabaseLoaded) {
                        console.log('‚ö†Ô∏è All Supabase CDNs failed - using fallback mode');
                        window.supabaseLoadFailed = true;
                        // Set up fallback mode
                        window.supabase = {
                            createClient: function() {
                                return {
                                    from: function() {
                                        return {
                                            select: function() {
                                                return Promise.resolve({ data: [], error: null });
                                            },
                                            insert: function() {
                                                return Promise.resolve({ data: null, error: 'Offline mode' });
                                            },
                                            update: function() {
                                                return Promise.resolve({ data: null, error: 'Offline mode' });
                                            },
                                            delete: function() {
                                                return Promise.resolve({ data: null, error: 'Offline mode' });
                                            }
                                        };
                                    }
                                };
                            }
                        };
                    }
                    return;
                }
                
                const url = cdnUrls[loadAttempts];
                console.log(`üîÑ Loading Supabase from CDN ${loadAttempts + 1}/${maxAttempts}:`, url);
                loadAttempts++;
                
                loadSupabaseScript(url, function(success) {
                    if (!success) {
                        setTimeout(tryNextCDN, 1000); // Wait 1 second before trying next CDN
                    }
                });
            }
            
            // Start loading immediately
            tryNextCDN();
        })();
    </script>
    
    <!-- Supabase Configuration -->
    <script src="js/supabase-config.js"></script>
    <script src="js/supabase-service.js"></script>
    
    <!-- Main Page Scripts -->
    <script src="js/script.js"></script>
    
    <!-- Android Navbar Enhancement -->
    <script src="js/android-navbar-enhancement.js"></script>
    
    <!-- Android Select-Based Navigation (Alternative to scrolling) -->
    <script src="js/android-select-navbar.js"></script>
    
    <!-- Bilingual Translation System -->
    <script src="js/bilingual-system.js"></script>
    
    <!-- App Scripts -->
    <script>
        // Initialize main page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üè† Home page loading...');
            
            // Initialize main page news - wait for Supabase to load
            setTimeout(function() {
                if (typeof loadNewsData === 'function') {
                    console.log('üöÄ Starting news loading process...');
                    loadNewsData();
                    console.log('‚úÖ Main page news loading initiated');
                } else {
                    console.error('‚ùå loadNewsData function not found');
                }
            }, 2000); // Increased delay to allow Supabase to load
        });
        
        // Function to show error messages in news container
        function showNewsError(title, message) {
            const newsContainer = document.getElementById('newsContainer');
            if (newsContainer) {
                newsContainer.innerHTML = `
                    <div class="news-error" style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: #e53e3e; margin-bottom: 16px;"></i>
                        <h3>${title}</h3>
                        <p>${message}</p>
                        <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-sync"></i> ·åà·åπ·äï ·ä†·ãµ·àµ
                        </button>
                    </div>
                `;
            }
        }
    </script>
    <script>
        // Android-optimized initialization
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üè† Home page initializing for Android...');
            
            // Detect Android device
            const isAndroid = /Android/i.test(navigator.userAgent);
            const isLowEndDevice = navigator.hardwareConcurrency <= 2 || navigator.deviceMemory <= 2;
            
            if (isAndroid) {
                console.log('üì± Android device detected');
                document.body.classList.add('android-device');
                
                if (isLowEndDevice) {
                    console.log('‚ö° Low-end device detected, optimizing...');
                    document.body.classList.add('low-end-device');
                    
                    // Reduce animations for low-end devices
                    const style = document.createElement('style');
                    style.textContent = `
                        .low-end-device .news-card {
                            transition: box-shadow 0.2s ease !important;
                        }
                        .low-end-device .news-card:hover {
                            transform: none !important;
                        }
                        .low-end-device .skeleton-image,
                        .low-end-device .skeleton-title,
                        .low-end-device .skeleton-text,
                        .low-end-device .skeleton-meta-item,
                        .low-end-device .skeleton-button {
                            animation-duration: 2s !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                // Android-specific optimizations
                if ('serviceWorker' in navigator) {
                    // Enable service worker for better caching on Android
                    console.log('üîß Service worker support detected');
                }
                
                // Optimize touch events for Android
                document.addEventListener('touchstart', function() {}, { passive: true });
                document.addEventListener('touchmove', function() {}, { passive: true });
                
                // Android Chrome address bar optimization
                const viewportMeta = document.querySelector('meta[name="viewport"]');
                if (viewportMeta && window.chrome) {
                    viewportMeta.setAttribute('content', 
                        'width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover, minimal-ui'
                    );
                }
            }
            
            // Inline Supabase configuration backup (in case file doesn't load)
            if (typeof supabaseConfig === 'undefined') {
                console.log('üì¶ Loading inline Supabase configuration...');
                window.supabaseConfig = {
                    url: 'https://asfrnjaegyzwpseryawi.supabase.co',
                    anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFzZnJuamFlZ3l6d3BzZXJ5YXdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4NDg4OTAsImV4cCI6MjA4MjQyNDg5MH0.7vLsda2lKd-9zEyeNJgGXQ39TmN1XZ-TfI4BHM_eWD8'
                };
                
                window.initializeSupabase = function() {
                    if (typeof window.supabase !== 'undefined' && window.supabase.createClient) {
                        const supabaseLib = window.supabase;
                        const supabaseClient = supabaseLib.createClient(window.supabaseConfig.url, window.supabaseConfig.anonKey);
                        window.supabase = supabaseClient;
                        console.log('‚úÖ Supabase initialized for Android');
                        return true;
                    } else {
                        console.error('‚ùå Supabase library not loaded');
                        return false;
                    }
                };
                
                window.isSupabaseConfigured = function() {
                    return window.supabaseConfig.url !== 'https://your-project-ref.supabase.co' && 
                           window.supabaseConfig.anonKey !== 'your-anon-key-here';
                };
            }
            
            console.log('‚úÖ Android-optimized configuration loaded');
        });

        // Enhanced scroll animations with intersection observer
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    
                    // Special handling for news section
                    if (entry.target.id === 'news') {
                        // Trigger news loading if not already loaded
                        setTimeout(() => {
                            if (typeof loadNewsData === 'function' && (!window.newsData || window.newsData.length === 0)) {
                                console.log('üîÑ News section visible, loading news...');
                                loadNewsData();
                            }
                        }, 500);
                    }
                }
            });
        }, observerOptions);

        // Observe all fade-in elements
        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Enhanced mobile menu with better Android support
        function initializeMobileMenu() {
            const mobileToggle = document.getElementById('mobileMenuToggle');
            const mainMenu = document.getElementById('mainMenu');
            
            if (!mobileToggle || !mainMenu) {
                console.error('Mobile menu elements not found');
                return;
            }
            
            console.log('üîß Initializing mobile menu...');
            
            // Function to toggle menu
            function toggleMobileMenu(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('üì± Mobile menu toggle clicked', mainMenu.classList.contains('active') ? '(closing)' : '(opening)');
                
                mainMenu.classList.toggle('active');
                
                // Toggle hamburger icon
                const icon = mobileToggle.querySelector('i');
                if (mainMenu.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                    mobileToggle.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent background scroll
                    console.log('‚úÖ Mobile menu opened');
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                    mobileToggle.classList.remove('active');
                    document.body.style.overflow = 'auto';
                    console.log('‚úÖ Mobile menu closed');
                }
            }
            
            // Function to close menu
            function closeMobileMenu() {
                if (mainMenu.classList.contains('active')) {
                    console.log('üì± Closing mobile menu');
                    mainMenu.classList.remove('active');
                    mobileToggle.classList.remove('active');
                    const icon = mobileToggle.querySelector('i');
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                    document.body.style.overflow = 'auto';
                }
            }
            
            // Remove any existing event listeners to prevent duplicates
            mobileToggle.replaceWith(mobileToggle.cloneNode(true));
            const newMobileToggle = document.getElementById('mobileMenuToggle');
            
            // Add multiple event listeners for better compatibility
            newMobileToggle.addEventListener('click', toggleMobileMenu);
            newMobileToggle.addEventListener('touchstart', function(e) {
                e.preventDefault();
                toggleMobileMenu(e);
            }, { passive: false });
            
            // Close mobile menu when clicking on links
            document.querySelectorAll('#mainMenu a').forEach(link => {
                link.addEventListener('click', closeMobileMenu);
                link.addEventListener('touchstart', closeMobileMenu);
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mainMenu.contains(e.target) && !newMobileToggle.contains(e.target)) {
                    if (mainMenu.classList.contains('active')) {
                        closeMobileMenu();
                    }
                }
            });
            
            // Close menu on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && mainMenu.classList.contains('active')) {
                    closeMobileMenu();
                }
            });
            
            console.log('‚úÖ Mobile menu initialized successfully');
        }
        
        // Initialize mobile menu when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeMobileMenu);
        } else {
            initializeMobileMenu();
        }
        
        // Debug function for mobile menu
        window.testMobileMenu = function() {
            console.log('üîß Testing mobile menu...');
            const toggle = document.getElementById('mobileMenuToggle');
            const menu = document.getElementById('mainMenu');
            
            console.log('Toggle button:', toggle);
            console.log('Menu element:', menu);
            console.log('Menu classes:', menu ? menu.className : 'not found');
            
            if (toggle && menu) {
                console.log('‚úÖ Elements found, triggering click...');
                toggle.click();
                console.log('Menu classes after click:', menu.className);
            } else {
                console.error('‚ùå Mobile menu elements not found');
            }
        };

        // Smooth scroll with offset for fixed header
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const headerHeight = document.querySelector('header').offsetHeight;
                    const targetPosition = target.offsetTop - headerHeight - 20;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Add loading animation to buttons
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (!this.href || this.href.includes('#')) {
                    this.classList.add('loading');
                    setTimeout(() => {
                        this.classList.remove('loading');
                    }, 1000);
                }
            });
        });
    </script>
</body>
</html>