<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple Images & Like Button Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Ethiopic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/modern-style.css">
    <link rel="stylesheet" href="css/news-system.css">
    <style>
        body {
            font-family: 'Noto Sans Ethiopic', 'Poppins', sans-serif;
            padding: 20px;
            background: #f5f7fa;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: white;
            padding: 30px;
            margin: 20px 0;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .demo-news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        .feature-highlight {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-align: center;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .feature-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .feature-item i {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-section feature-highlight">
            <h1><i class="fas fa-images"></i> Multiple Images & Enhanced Like System</h1>
            <p>Testing Facebook-style multiple image upload and improved like functionality</p>
            
            <div class="feature-list">
                <div class="feature-item">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Multiple Upload</h3>
                    <p>Upload up to 10 images at once with drag & drop support</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-images"></i>
                    <h3>Image Carousel</h3>
                    <p>Beautiful carousel with navigation controls and indicators</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-heart"></i>
                    <h3>Enhanced Likes</h3>
                    <p>Animated like button with database sync and local storage</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>Mobile Optimized</h3>
                    <p>Touch-friendly controls with haptic feedback</p>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-newspaper"></i> Demo News with Multiple Images</h2>
            <p>These demo news items show how multiple images work in the carousel format:</p>
            
            <div class="demo-news-grid" id="demoNewsContainer">
                <!-- Demo news will be inserted here -->
            </div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-cog"></i> Test Controls</h2>
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="loadDemoNews()">
                    <i class="fas fa-sync"></i> Load Demo News
                </button>
                <button class="btn btn-secondary" onclick="testLikeFunction()">
                    <i class="fas fa-heart"></i> Test Like Function
                </button>
                <button class="btn btn-secondary" onclick="clearLikedNews()">
                    <i class="fas fa-trash"></i> Clear Liked News
                </button>
                <button class="btn btn-secondary" onclick="showLikedNews()">
                    <i class="fas fa-list"></i> Show Liked News
                </button>
            </div>
            
            <div id="testResults" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; display: none;">
                <h4>Test Results:</h4>
                <div id="testOutput"></div>
            </div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-info-circle"></i> How to Use</h2>
            <ol style="line-height: 1.8;">
                <li><strong>Admin Panel:</strong> Go to admin.html and use the new multiple image upload</li>
                <li><strong>Drag & Drop:</strong> Drag multiple images to the upload area</li>
                <li><strong>Image Carousel:</strong> Use arrow buttons or indicators to navigate</li>
                <li><strong>Like Button:</strong> Click the heart button to like/unlike news</li>
                <li><strong>Mobile:</strong> Swipe gestures work on touch devices</li>
            </ol>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
    <script src="js/amharic-system.js"></script>
    <script src="js/script.js"></script>

    <script>
        // Demo news data with multiple images
        const demoNewsData = [
            {
                id: 1001,
                title: "የሰላም ስምምነት ተፈረመ",
                category: "ዜና",
                images: [
                    "images/hero-bg.jpg",
                    "images/pro.jpg",
                    "images/hero-bg.png"
                ],
                excerpt: "በዚህ ሳምንት ውስጥ አዲስ የሰላም ስምምነት ተፈርሟል...",
                content: "ሙሉ ዜና ይህ ነው...",
                date: "ታህሳስ 30, 2017",
                likes: 15,
                comments: []
            },
            {
                id: 1002,
                title: "የማህበረሰብ ደህንነት ፕሮግራም",
                category: "አገልግሎት",
                images: [
                    "images/pro.jpg",
                    "images/hero-bg.png"
                ],
                excerpt: "አዲስ የማህበረሰብ ደህንነት ፕሮግራም ተጀመረ...",
                content: "ሙሉ ዜና ይህ ነው...",
                date: "ታህሳስ 29, 2017",
                likes: 8,
                comments: []
            },
            {
                id: 1003,
                title: "የወጣቶች ስልጠና ፕሮግራም",
                category: "ስልጠና",
                images: [
                    "images/hero-bg.png"
                ],
                excerpt: "የወጣቶች ስልጠና ፕሮግራም በተሳካ ሁኔታ ተጠናቀቀ...",
                content: "ሙሉ ዜና ይህ ነው...",
                date: "ታህሳስ 28, 2017",
                likes: 23,
                comments: []
            }
        ];

        function loadDemoNews() {
            // Set demo data to global newsData
            window.newsData = demoNewsData;
            
            const container = document.getElementById('demoNewsContainer');
            container.innerHTML = '';
            
            demoNewsData.forEach((news, index) => {
                const newsCard = createNewsCard(news, index);
                container.appendChild(newsCard);
                
                // Trigger entrance animation
                setTimeout(() => {
                    newsCard.classList.add('animate-in');
                }, index * 100);
            });
            
            // Initialize liked state
            setTimeout(() => {
                initializeLikedState();
            }, 500);
            
            showTestResult('Demo news loaded successfully with multiple images!');
        }

        function testLikeFunction() {
            const firstNews = demoNewsData[0];
            if (firstNews) {
                likeNews(firstNews.id);
                showTestResult(`Tested like function for news ID: ${firstNews.id}`);
            } else {
                showTestResult('Please load demo news first!');
            }
        }

        function clearLikedNews() {
            localStorage.removeItem('likedNews');
            // Refresh like buttons
            document.querySelectorAll('.like-btn').forEach(btn => {
                btn.classList.remove('liked');
                const icon = btn.querySelector('i');
                if (icon) {
                    icon.className = 'far fa-heart';
                }
            });
            showTestResult('Cleared all liked news from local storage');
        }

        function showLikedNews() {
            const likedNews = JSON.parse(localStorage.getItem('likedNews') || '[]');
            showTestResult(`Liked news IDs: ${likedNews.length > 0 ? likedNews.join(', ') : 'None'}`);
        }

        function showTestResult(message) {
            const resultsDiv = document.getElementById('testResults');
            const outputDiv = document.getElementById('testOutput');
            
            outputDiv.innerHTML = `
                <div style="padding: 10px; background: white; border-radius: 4px; margin: 5px 0;">
                    <strong>${new Date().toLocaleTimeString()}:</strong> ${message}
                </div>
            ` + outputDiv.innerHTML;
            
            resultsDiv.style.display = 'block';
        }

        // Auto-load demo news on page load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                loadDemoNews();
                showTestResult('Page loaded - demo news initialized');
            }, 1000);
        });
    </script>
</body>
</html>